{"ast":null,"code":"var _jsxFileName = \"/Users/user/Bartender/bartender admin/src/subcomponents/AddAgent.js\";\nimport React, { Component } from 'react';\nimport ReactModal from 'react-modal';\nimport * as API from '../api/Api';\nimport AddEditAgent from './AddEditAgent';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst btn_style_left = {\n  marginLeft: \"16px\",\n  marginRight: \"8px\"\n};\nconst btn_style_right = {\n  marginLeft: \"8px\",\n  marginRight: \"16px\"\n};\nReactModal.setAppElement('#main');\nexport default class AddAgent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstname: \"\",\n      lastname: \"\",\n      phone_number: \"\",\n      password: \"\",\n      avatar: null,\n      file: null,\n      ver_file: null,\n      verification_type: \"\",\n      verification_image: null,\n      phone_number_1: \"\",\n      address: \"\",\n      email: \"\",\n      referee_name_1: \"\",\n      referee_name_2: \"\",\n      referee_address_1: \"\",\n      referee_address_2: \"\",\n      referee_phone_1: \"\",\n      referee_phone_2: \"\",\n      age: 0,\n      marital_status: \"Single\",\n      gender: \"Male\",\n      bank_name: \"\",\n      account_name: \"\",\n      account_number: \"\"\n    };\n    this.onFieldChanged = this.onFieldChanged.bind(this);\n    this.imageChanged = this.imageChanged.bind(this);\n    this.verificationChanged = this.verificationChanged.bind(this);\n    this.uploadImage = this.uploadImage.bind(this);\n    this.uploadVerification = this.uploadVerification.bind(this);\n    this.createAgent = this.createAgent.bind(this);\n  }\n\n  async createAgent() {\n    if (this.state.firstname.length <= 0 || this.state.firstname.length > 100) {\n      return;\n    }\n\n    if (this.state.lastname.length <= 0 || this.state.lastname.length > 100) {\n      return;\n    }\n\n    if (this.state.phone_number.length <= 0 || this.state.phone_number.length > 100) {\n      return;\n    }\n\n    if (this.state.password.length <= 0 || this.state.password.length > 100) {\n      return;\n    }\n\n    const data = {\n      firstname: this.state.firstname,\n      lastname: this.state.lastname,\n      phone_number: this.state.phone_number,\n      password: this.state.password,\n      avatar: this.state.avatar,\n      verification_type: this.state.verification_type,\n      verification_image: this.state.verification_image,\n      phone_number_1: this.state.phone_number_1,\n      address: this.state.address,\n      email: this.state.email,\n      referee_name_1: this.state.referee_name_1,\n      referee_name_2: this.state.referee_name_2,\n      referee_address_1: this.state.referee_address_1,\n      referee_address_2: this.state.referee_address_2,\n      referee_phone_1: this.state.referee_phone_1,\n      referee_phone_2: this.state.referee_phone_2,\n      age: this.state.age,\n      marital_status: this.state.marital_status,\n      gender: this.state.gender,\n      bank_name: this.state.bank_name,\n      account_name: this.state.account_name,\n      account_number: this.state.account_number\n    };\n    this.props.showLoading();\n    const response = await API.createAgent(data);\n    this.props.hideLoading();\n\n    if (response === \"error\") {\n      //show error message\n      return;\n    }\n\n    if (response.data && response.data.response === \"created\") {\n      this.setState({\n        firstname: \"\",\n        lastname: \"\",\n        phone_number: \"\",\n        password: \"\",\n        avatar: null,\n        file: null,\n        ver_file: null,\n        verification_type: \"\",\n        verification_image: null,\n        phone_number_1: \"\",\n        address: \"\",\n        email: \"\",\n        referee_name_1: \"\",\n        referee_name_2: \"\",\n        referee_address_1: \"\",\n        referee_address_2: \"\",\n        referee_phone_1: \"\",\n        referee_phone_2: \"\",\n        age: 0,\n        marital_status: \"\",\n        gender: \"\",\n        bank_name: \"\",\n        account_name: \"\",\n        account_number: \"\"\n      });\n      this.props.reloadAgents();\n    }\n  }\n\n  verificationChanged(e) {\n    var file = e.target.files[0];\n\n    if (file) {\n      if (!file.name.match(/\\.(png|jpg|jpeg|gif|svg)$/)) {\n        //file is not an image\n        this.error_message = \"File is not a Zip File\";\n        return;\n      }\n\n      if (file.size > 256000) {\n        //file is too large\n        this.error_message = \"File is too large\";\n        return;\n      }\n\n      this.setState({\n        ver_file: file,\n        verification_image: URL.createObjectURL(file)\n      });\n    }\n  }\n\n  imageChanged(e) {\n    var file = e.target.files[0];\n\n    if (file) {\n      if (!file.name.match(/\\.(png|jpg|jpeg|gif|svg)$/)) {\n        //file is not an image\n        this.error_message = \"File is not a Zip File\";\n        return;\n      }\n\n      if (file.size > 256000) {\n        //file is too large\n        this.error_message = \"File is too large\";\n        return;\n      }\n\n      this.setState({\n        file: file,\n        avatar: URL.createObjectURL(file)\n      });\n    }\n  }\n\n  async uploadImage() {\n    if (this.state.file != null) {\n      var fd = new FormData();\n      fd.append(\"avatar\", this.state.file, this.state.file.name);\n      this.props.showLoading();\n      const response = await API.uploadAgentAvatar(fd);\n      this.props.hideLoading();\n\n      if (response == \"error\") {\n        //show error message\n        return;\n      }\n\n      if (response && response.data && response.data.response) {\n        this.setState({\n          avatar: response.data.response\n        });\n      } else {\n        this.setState({\n          error: \"An error occurred uploading the file. Please check the network\"\n        });\n      }\n    }\n  }\n\n  async uploadVerification() {\n    if (this.state.ver_file != null) {\n      var fd = new FormData();\n      fd.append(\"verification_image\", this.state.ver_file, this.state.ver_file.name);\n      fd.append(\"verification_type\", this.state.verification_type);\n      this.props.showLoading();\n      const response = await API.uploadAgentId(fd);\n      this.props.hideLoading();\n\n      if (response == \"error\") {\n        //show error message\n        return;\n      }\n\n      if (response && response.data && response.data.response) {\n        this.setState({\n          verification_image: response.data.response\n        });\n      } else {\n        this.setState({\n          error: \"An error occurred uploading the file. Please check the network\"\n        });\n      }\n    }\n  }\n\n  onFieldChanged(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ReactModal, {\n        isOpen: this.props.showAddAgent,\n        className: \"AgentModal\",\n        overlayClassName: \"Overlay\",\n        contentLabel: \"Minimal Modal Example\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center\",\n          children: \"Add Agent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AddEditAgent, {\n          verification_type: this.state.verification_type,\n          uploadVerification: this.uploadVerification,\n          verificationChanged: this.verificationChanged,\n          uploadImage: this.uploadImage,\n          imageChanged: this.imageChanged,\n          onFieldChanged: this.onFieldChanged,\n          ver_file: this.state.ver_file,\n          file: this.state.file,\n          firstname: this.state.firstname,\n          lastname: this.state.lastname,\n          password: this.state.password,\n          phone_number: this.state.phone_number,\n          avatar: this.state.avatar,\n          verification_image: this.state.verification_image,\n          phone_number_1: this.state.phone_number_1,\n          address: this.state.address,\n          email: this.state.email,\n          referee_name_1: this.state.referee_name_1,\n          referee_name_2: this.state.referee_name_2,\n          referee_address_1: this.state.referee_address_1,\n          referee_address_2: this.state.referee_address_2,\n          referee_phone_1: this.state.referee_phone_1,\n          referee_phone_2: this.state.referee_phone_2,\n          age: this.state.age,\n          marital_status: this.state.marital_status,\n          gender: this.state.gender,\n          bank_name: this.state.bank_name,\n          account_name: this.state.account_name,\n          account_number: this.state.account_number\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"laser-inline green-bg bt-btn\",\n          style: btn_style_left,\n          onClick: this.createAgent,\n          children: \"save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"laser-inline grey-bg bt-btn\",\n          style: btn_style_right,\n          onClick: this.props.handleCloseModal,\n          children: \"cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/user/Bartender/bartender admin/src/subcomponents/AddAgent.js"],"names":["React","Component","ReactModal","API","AddEditAgent","btn_style_left","marginLeft","marginRight","btn_style_right","setAppElement","AddAgent","constructor","props","state","firstname","lastname","phone_number","password","avatar","file","ver_file","verification_type","verification_image","phone_number_1","address","email","referee_name_1","referee_name_2","referee_address_1","referee_address_2","referee_phone_1","referee_phone_2","age","marital_status","gender","bank_name","account_name","account_number","onFieldChanged","bind","imageChanged","verificationChanged","uploadImage","uploadVerification","createAgent","length","data","showLoading","response","hideLoading","setState","reloadAgents","e","target","files","name","match","error_message","size","URL","createObjectURL","fd","FormData","append","uploadAgentAvatar","error","uploadAgentId","event","value","type","checked","render","showAddAgent","handleCloseModal"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\n\nimport ReactModal from 'react-modal';\n\nimport * as API from '../api/Api';\n\nimport AddEditAgent from './AddEditAgent';\n\nconst btn_style_left = {\n    marginLeft: \"16px\",\n    marginRight: \"8px\"\n}\n\nconst btn_style_right = {\n    marginLeft: \"8px\",\n    marginRight: \"16px\"\n}\n\nReactModal.setAppElement('#main');\n\nexport default class AddAgent extends Component{\n    constructor(props){\n        super(props);\n\n        this.state={\n            firstname: \"\",\n            lastname: \"\",\n            phone_number: \"\",\n            password: \"\",\n            avatar: null,\n            file: null,\n            ver_file: null,\n            verification_type: \"\",\n            verification_image: null,\n\n            phone_number_1: \"\",\n            address: \"\",\n            email: \"\",\n            referee_name_1: \"\",\n            referee_name_2: \"\",\n            referee_address_1: \"\",\n            referee_address_2: \"\",\n            referee_phone_1: \"\",\n            referee_phone_2: \"\",\n            age: 0,\n            marital_status: \"Single\",\n            gender: \"Male\",\n            bank_name: \"\",\n            account_name: \"\",\n            account_number: \"\"\n        }\n\n        this.onFieldChanged = this.onFieldChanged.bind(this);\n        this.imageChanged = this.imageChanged.bind(this);\n        this.verificationChanged = this.verificationChanged.bind(this);\n        this.uploadImage = this.uploadImage.bind(this);\n        this.uploadVerification = this.uploadVerification.bind(this);\n        this.createAgent = this.createAgent.bind(this);\n    }\n    \n    async createAgent(){\n        if(this.state.firstname.length <= 0 || this.state.firstname.length > 100){\n           return;\n        }\n\n        if(this.state.lastname.length <= 0 || this.state.lastname.length > 100){\n            return;\n        }\n\n        if(this.state.phone_number.length <= 0 || this.state.phone_number.length > 100){\n            return;\n        }\n\n        if(this.state.password.length <= 0 || this.state.password.length > 100){\n            return;\n        }\n\n        const data = {\n            firstname: this.state.firstname,\n            lastname: this.state.lastname,\n            phone_number: this.state.phone_number,\n            password: this.state.password,\n            avatar: this.state.avatar,\n            verification_type: this.state.verification_type,\n            verification_image: this.state.verification_image,\n            phone_number_1: this.state.phone_number_1,\n            address: this.state.address,\n            email: this.state.email,\n            referee_name_1: this.state.referee_name_1,\n            referee_name_2: this.state.referee_name_2,\n            referee_address_1: this.state.referee_address_1,\n            referee_address_2: this.state.referee_address_2,\n            referee_phone_1: this.state.referee_phone_1,\n            referee_phone_2: this.state.referee_phone_2,\n            age: this.state.age,\n            marital_status: this.state.marital_status,\n            gender: this.state.gender,\n            bank_name: this.state.bank_name,\n            account_name: this.state.account_name,\n            account_number: this.state.account_number\n        }\n        \n        this.props.showLoading();\n\n        const response = await API.createAgent(data)\n        \n        this.props.hideLoading();\n        \n        if(response===\"error\"){\n            //show error message\n            return;\n        }\n\n        if(response.data && response.data.response===\"created\"){\n            this.setState({\n                firstname: \"\",\n                lastname: \"\",\n                phone_number: \"\",\n                password: \"\",\n                avatar: null,\n                file: null,\n                ver_file: null,\n                verification_type: \"\",\n                verification_image: null,\n                phone_number_1: \"\",\n                address: \"\",\n                email: \"\",\n                referee_name_1: \"\",\n                referee_name_2: \"\",\n                referee_address_1: \"\",\n                referee_address_2: \"\",\n                referee_phone_1: \"\",\n                referee_phone_2: \"\",\n                age: 0,\n                marital_status: \"\",\n                gender: \"\",\n                bank_name: \"\",\n                account_name: \"\",\n                account_number: \"\"\n            })\n\n            this.props.reloadAgents();\n        }\n    }\n\n    verificationChanged(e){\n        var file =  e.target.files[0]\n        \n        if(file){\n            if (!file.name.match(/\\.(png|jpg|jpeg|gif|svg)$/)) {\n                //file is not an image\n                this.error_message = \"File is not a Zip File\";\n                return;\n            }\n            \n            if(file.size>256000){\n                //file is too large\n                this.error_message = \"File is too large\";\n                return;\n            }\n    \n            this.setState({\n                ver_file: file,\n                verification_image: URL.createObjectURL(file)\n            });\n        }\n    }\n\n    imageChanged(e){\n        var file =  e.target.files[0]\n        \n        if(file){\n            if (!file.name.match(/\\.(png|jpg|jpeg|gif|svg)$/)) {\n                //file is not an image\n                this.error_message = \"File is not a Zip File\";\n                return;\n            }\n            \n            if(file.size>256000){\n                //file is too large\n                this.error_message = \"File is too large\";\n                return;\n            }\n    \n            this.setState({\n                file: file,\n                avatar: URL.createObjectURL(file)\n            });\n        }\n    }\n\n    async uploadImage(){\n        if(this.state.file!=null){\n\n            var fd = new FormData();\n            \n            fd.append(\"avatar\", this.state.file, this.state.file.name);\n            \n            this.props.showLoading();\n\n            const response = await API.uploadAgentAvatar(fd);\n\n            this.props.hideLoading();\n\n            if(response==\"error\"){\n                //show error message\n                return;\n            }\n\n            if(response && response.data && response.data.response){\n                this.setState({\n                    avatar: response.data.response\n                })   \n            }\n            else{\n                this.setState({\n                    error: \"An error occurred uploading the file. Please check the network\"\n                })\n            }\n        }\n    }\n\n    async uploadVerification(){\n        if(this.state.ver_file!=null){\n\n            var fd = new FormData();\n\n            fd.append(\"verification_image\", this.state.ver_file, this.state.ver_file.name);\n            fd.append(\"verification_type\", this.state.verification_type);\n            \n            this.props.showLoading();\n\n            const response = await API.uploadAgentId(fd);\n\n            this.props.hideLoading();\n\n            if(response==\"error\"){\n                //show error message\n                return;\n            }\n\n            if(response && response.data && response.data.response){\n                this.setState({\n                    verification_image: response.data.response\n                })   \n            }\n            else{\n                this.setState({\n                    error: \"An error occurred uploading the file. Please check the network\"\n                })\n            }\n        }\n    }\n\n    onFieldChanged(event){\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = target.name;\n        \n        this.setState({\n            [name]: value\n        })\n    }\n\n    render(){\n        return (\n            <div>\n                <ReactModal \n                    isOpen={this.props.showAddAgent}\n                    className=\"AgentModal\"\n                    overlayClassName=\"Overlay\"\n                    contentLabel=\"Minimal Modal Example\">\n                    <h4 className=\"text-center\">Add Agent</h4>\n\n                    <AddEditAgent \n                        verification_type={this.state.verification_type} \n                        uploadVerification={this.uploadVerification} \n                        verificationChanged={this.verificationChanged} \n                        uploadImage={this.uploadImage} \n                        imageChanged={this.imageChanged} \n                        onFieldChanged={this.onFieldChanged} \n                        ver_file={this.state.ver_file} \n                        file={this.state.file} \n                        firstname={this.state.firstname} \n                        lastname={this.state.lastname} \n                        password={this.state.password} \n                        phone_number={this.state.phone_number} \n                        avatar={this.state.avatar} \n                        verification_image={this.state.verification_image}\n                        phone_number_1={this.state.phone_number_1}\n                        address={this.state.address}\n                        email={this.state.email}\n                        referee_name_1={this.state.referee_name_1}\n                        referee_name_2={this.state.referee_name_2}\n                        referee_address_1={this.state.referee_address_1}\n                        referee_address_2={this.state.referee_address_2}\n                        referee_phone_1={this.state.referee_phone_1}\n                        referee_phone_2={this.state.referee_phone_2}\n                        age={this.state.age}\n                        marital_status={this.state.marital_status}\n                        gender={this.state.gender}\n                        bank_name={this.state.bank_name}\n                        account_name={this.state.account_name}\n                        account_number={this.state.account_number}/>\n\n                    <button className=\"laser-inline green-bg bt-btn\" style={btn_style_left} onClick={this.createAgent}>save</button>\n                    <button className=\"laser-inline grey-bg bt-btn\" style={btn_style_right} onClick={this.props.handleCloseModal}>cancel</button>\n                </ReactModal>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}